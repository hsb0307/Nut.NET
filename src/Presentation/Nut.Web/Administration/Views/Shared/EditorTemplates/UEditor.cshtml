@model String
@using Nut.Core
@using Nut.Core.Domain.Common
@using Nut.Services.Security
@using Nut.Web.Framework.UI
@{
    //we do not bundle this script file (does not work for some reasons in bundle)
    Html.AddScriptParts("~/Vendor/ueditor/ueditor.config.js", true);
    Html.AddScriptParts("~/Vendor/ueditor/ueditor.all.js", true);
    //Html.AddScriptParts("~/Vendor/ueditor/ueditor.all.min.js", true);

    //Html.AddScriptParts("~/Vendor/ueditor/lang/zh-cn/zh-cn.js", true);
    //Html.AddCssFileParts("~/Vendor/ueditor/themes/iframe.css");

    var permissionService = EngineContext.Current.Resolve<IPermissionService>();

    var allowRoxyFileman = permissionService.Authorize(StandardPermissionProvider.HtmlEditorManagePictures);

    var random = CommonHelper.GenerateRandomInteger();
}

@Html.TextArea(string.Empty, /* Name suffix */
    ViewData.TemplateInfo.FormattedModelValue /* Initial value */
)

<script type="text/javascript">

    $(document).ready(function () {
        var editor@(random) = new baidu.editor.ui.Editor({
            UEDITOR_HOME_URL: '/Vendor/ueditor/',//配置编辑器路径
            iframeCssUrl: '/Vendor/ueditor/themes/iframe.css',//样式路径
            autoHeightEnabled: true,//高度自动增长
            minFrameHeight: 500//最小高度
        });
        editor@(random).render('@ViewData.TemplateInfo.GetFullHtmlFieldId(string.Empty)');
    });
</script>
